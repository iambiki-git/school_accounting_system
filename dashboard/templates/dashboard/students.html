{% extends "base.html" %}
{% block content %}

<div class="min-h-screen bg-gray-50">
    {% include "dashboard/header.html" %}
    {% include "dashboard/sidebar.html" %}

    <main class="flex-1 pb-10">
        <!-- Page header -->
        <div class="bg-white shadow">
            <div class="px-4 sm:px-6 lg:max-w-7xl lg:mx-auto lg:px-8 py-6">
                <div class="flex items-center justify-between">
                    <div class="flex-1 min-w-0">
                        <h1 class="text-2xl font-bold text-gray-900">Student Management</h1>
                        <p class="mt-1 text-sm text-gray-500">Manage all student records in one place</p>
                    </div>
                    <div class="mt-4 flex md:mt-0 md:ml-4">
                        <button type="button" id="addStudent" class="relative inline-flex items-center px-6 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-lg transform transition-all duration-150 hover:scale-105 active:scale-95 group">
                            <svg class="-ml-1 mr-2 h-5 w-5 text-blue-100 group-hover:text-blue-50 transition-colors duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                            </svg>
                            Add New Student
                            <span class="absolute top-0 right-0 -mt-1 -mr-1 flex h-3 w-3">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-100"></span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main content -->
        <div class="mt-8 px-4 sm:px-6 lg:max-w-7xl lg:mx-auto lg:px-8">
            <!-- Filters -->
            <div class="mb-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Search</label>
                        <div class="relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <input type="text" id="search" class="input-field pl-10" placeholder="Search students...">
                        </div>
                    </div>
                    <div>
                        <label for="class-filter" class="block text-sm font-medium text-gray-700 mb-1">Class</label>
                        <select id="class-filter" class="input-field">
                            <option>All Classes</option>
                            <option>Grade 1</option>
                            <option>Grade 2</option>
                            <option>Grade 3</option>
                        </select>
                    </div>
                    <div>
                        <label for="status-filter" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select id="status-filter" class="input-field">
                            <option>All Statuses</option>
                            <option>Active</option>
                            <option>Inactive</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Student cards grid -->
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                <!-- Student Card 1 -->
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-4 py-5 sm:p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-blue-500 rounded-md p-3">
                                <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">John Doe</dt>
                                    <dd class="flex items-baseline">
                                        <div class="text-lg font-semibold text-gray-900">Grade 5</div>
                                        <div class="ml-2 flex items-baseline text-sm font-semibold text-green-600">
                                            <span class="sr-only">Status</span>Active
                                        </div>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                        <div class="mt-6 border-t border-gray-200 pt-4">
                            <div class="flex space-x-3">
                                <button type="button" class="btn-icon text-blue-600 hover:text-blue-900">
                                    <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                    </svg>
                                    <span class="sr-only">Edit</span>
                                </button>
                                <button type="button" class="btn-icon text-red-600 hover:text-red-900">
                                    <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                    </svg>
                                    <span class="sr-only">Delete</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Student Card 2 -->
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-4 py-5 sm:p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-purple-500 rounded-md p-3">
                                <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">Maria Smith</dt>
                                    <dd class="flex items-baseline">
                                        <div class="text-lg font-semibold text-gray-900">Grade 4</div>
                                        <div class="ml-2 flex items-baseline text-sm font-semibold text-yellow-600">
                                            <span class="sr-only">Status</span>Pending
                                        </div>
                                    </dd>
                                </dl>
                            </div>
                        </div>
                        <div class="mt-6 border-t border-gray-200 pt-4">
                            <div class="flex space-x-3">
                                <button type="button" class="btn-icon text-blue-600 hover:text-blue-900">
                                    <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                    </svg>
                                    <span class="sr-only">Edit</span>
                                </button>
                                <button type="button" class="btn-icon text-red-600 hover:text-red-900">
                                    <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                    </svg>
                                    <span class="sr-only">Delete</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add New Student Card -->
                <div class="bg-white overflow-hidden shadow rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors duration-200">
                    <button id="addStudentCard" class="w-full h-full flex items-center justify-center p-6">
                        <div class="text-center">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                            <h3 class="mt-2 text-sm font-medium text-gray-900">Add new student</h3>
                            <p class="mt-1 text-sm text-gray-500">Click to create a new student record</p>
                        </div>
                    </button>
                </div>
            </div>
        </div>

    <!-- Add Student Modal -->
    <div class="fixed z-50 inset-0 overflow-y-auto hidden" id="addStudentModal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <!-- Overlay -->
            <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" aria-hidden="true"></div>
            
            <!-- Modal container -->
            <div class="relative bg-white rounded-xl shadow-2xl overflow-hidden transform transition-all sm:max-w-2xl w-full max-h-[90vh] flex flex-col">
                <!-- Header with gradient background -->
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 bg-white bg-opacity-20 p-2 rounded-lg">
                            <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg font-semibold text-white" id="modal-title">Add New Student</h3>
                            <p class="text-sm text-blue-100">Fill in all required student details</p>
                        </div>
                    </div>
                </div>
                
                <!-- Scrollable modal body -->
                <div class="px-6 py-5 space-y-6 overflow-y-auto flex-1">
                    <form id="studentForm" method="POST" action="{% url 'add_student' %}">
                        {% csrf_token %}
                        <div class="space-y-5">
                            <!-- Personal Information Section -->
                            <div class="border-b border-gray-200 pb-4">
                                <h4 class="text-md font-medium text-gray-700 mb-3">Personal Information</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="space-y-1">
                                        <label for="first-name" class="block text-sm font-medium text-gray-700">First Name *</label>
                                        <input type="text" id="first-name" name="first_name" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="middle-name" class="block text-sm font-medium text-gray-700">Middle Name</label>
                                        <input type="text" id="middle-name" name="middle_name" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                    <div class="space-y-1">
                                        <label for="last-name" class="block text-sm font-medium text-gray-700">Last Name *</label>
                                        <input type="text" id="last-name" name="last_name" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="dob" class="block text-sm font-medium text-gray-700">Date of Birth *</label>
                                        <input type="date" id="dob" name="dob" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="gender" class="block text-sm font-medium text-gray-700">Gender *</label>
                                        <select id="gender" name="gender" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8"
                                                required>
                                            <option value="">Select gender</option>
                                            <option value="M">Male</option>
                                            <option value="F">Female</option>
                                            <option value="O">Other</option>
                                        </select>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="religion" class="block text-sm font-medium text-gray-700">Religion</label>
                                        <select id="religion" name="religion" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8">
                                            <option value="">Select religion</option>
                                            <option value="HINDU">Hindu</option>
                                            <option value="BUDDHIST">Buddhist</option>
                                            <option value="MUSLIM">Muslim</option>
                                            <option value="CHRISTIAN">Christian</option>
                                            <option value="OTHER">Other</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="space-y-1 mt-4">
                                    <label for="blood-group" class="block text-sm font-medium text-gray-700">Blood Group</label>
                                    <select id="blood-group" name="blood_group" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8">
                                        <option value="">Select blood group</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Academic Information Section -->
                            <div class="border-b border-gray-200 pb-4">
                                <h4 class="text-md font-medium text-gray-700 mb-3">Academic Information</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="space-y-1">
                                        <label for="class-level" class="block text-sm font-medium text-gray-700">Class *</label>
                                        <select id="class-level" name="class_level" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8"
                                                required>
                                            <option value="">Select class</option>
                                            <option>Grade 1</option>
                                            <option>Grade 2</option>
                                            <option>Grade 3</option>
                                            <option>Grade 4</option>
                                            <option>Grade 5</option>
                                            <option>Grade 6</option>
                                            <option>Grade 7</option>
                                            <option>Grade 8</option>
                                            <option>Grade 9</option>
                                            <option>Grade 10</option>
                                        </select>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="roll-number" class="block text-sm font-medium text-gray-700">Roll Number *</label>
                                        <input type="text" id="roll-number" name="roll_number" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="section" class="block text-sm font-medium text-gray-700">Section</label>
                                        <select id="section" name="section" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI24IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8">
                                            <option value="">Select section</option>
                                            <option>A</option>
                                            <option>B</option>
                                            <option>C</option>
                                            <option>D</option>
                                        </select>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="admission-date" class="block text-sm font-medium text-gray-700">Admission Date *</label>
                                        <input type="date" id="admission-date" name="admission_date" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                </div>
                                
                                <div class="space-y-1 mt-4">
                                    <label for="status" class="block text-sm font-medium text-gray-700">Status *</label>
                                    <select id="status" name="status" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiAjd2VhZHRoZXItNzAwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+')] bg-no-repeat bg-right-2 bg-origin-content pr-8"
                                            required>
                                        <option value="ACTIVE">Active</option>
                                        <option value="INACTIVE">Inactive</option>
                                        <option value="ALUMNI">Alumni</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Contact Information Section -->
                            <div class="border-b border-gray-200 pb-4">
                                <h4 class="text-md font-medium text-gray-700 mb-3">Contact Information</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="space-y-1">
                                        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                        <input type="email" id="email" name="email" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                    <div class="space-y-1">
                                        <label for="phone" class="block text-sm font-medium text-gray-700">Phone</label>
                                        <div class="relative rounded-md shadow-sm">
                                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span class="text-gray-500 sm:text-sm">+977</span>
                                            </div>
                                            <input type="tel" id="phone" name="phone" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 pl-12 border transition-all duration-200 hover:border-blue-300">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Medical Information Section -->
                            <div class="border-b border-gray-200 pb-4">
                                <h4 class="text-md font-medium text-gray-700 mb-3">Medical Information</h4>
                                <div class="space-y-1">
                                    <label for="medical-conditions" class="block text-sm font-medium text-gray-700">Medical Conditions</label>
                                    <textarea id="medical-conditions" name="medical_conditions" rows="3"
                                        class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"></textarea>
                                </div>
                                <div class="space-y-1 mt-4">
                                    <label for="allergies" class="block text-sm font-medium text-gray-700">Allergies</label>
                                    <textarea id="allergies" name="allergies" rows="3"
                                        class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"></textarea>
                                </div>
                            </div>
                            
                            <!-- Parent Information Section -->
                            <div class="border-b border-gray-200 pb-4">
                                <h4 class="text-md font-medium text-gray-700 mb-3">Parent Information</h4>
                                
                                <!-- Father's Information -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="space-y-1">
                                        <label for="father-name" class="block text-sm font-medium text-gray-700">Father's Name *</label>
                                        <input type="text" id="father-name" name="father_name" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="father-occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                                        <input type="text" id="father-occupation" name="father_occupation" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="father-phone" class="block text-sm font-medium text-gray-700">Phone *</label>
                                        <div class="relative rounded-md shadow-sm">
                                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span class="text-gray-500 sm:text-sm">+977</span>
                                            </div>
                                            <input type="tel" id="father-phone" name="father_phone" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 pl-12 border transition-all duration-200 hover:border-blue-300"
                                                required>
                                        </div>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="father-email" class="block text-sm font-medium text-gray-700">Email</label>
                                        <input type="email" id="father-email" name="father_email" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                </div>
                                
                                <!-- Mother's Information -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="mother-name" class="block text-sm font-medium text-gray-700">Mother's Name *</label>
                                        <input type="text" id="mother-name" name="mother_name" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="mother-occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                                        <input type="text" id="mother-occupation" name="mother_occupation" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="mother-phone" class="block text-sm font-medium text-gray-700">Phone</label>
                                        <div class="relative rounded-md shadow-sm">
                                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                <span class="text-gray-500 sm:text-sm">+977</span>
                                            </div>
                                            <input type="tel" id="mother-phone" name="mother_phone" 
                                                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 pl-12 border transition-all duration-200 hover:border-blue-300">
                                        </div>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="mother-email" class="block text-sm font-medium text-gray-700">Email</label>
                                        <input type="email" id="mother-email" name="mother_email" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                    </div>
                                </div>
                                
                                <!-- Guardian Information -->
                                <div class="mt-4">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" id="has-guardian" name="has_guardian" class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                        <span class="ml-2 text-sm text-gray-700">Add Guardian Information</span>
                                    </label>
                                    
                                    <div id="guardian-fields" class="hidden mt-4 space-y-4">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="space-y-1">
                                                <label for="guardian-name" class="block text-sm font-medium text-gray-700">Guardian's Name</label>
                                                <input type="text" id="guardian-name" name="guardian_name" 
                                                    class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                            </div>
                                            <div class="space-y-1">
                                                <label for="guardian-relation" class="block text-sm font-medium text-gray-700">Relation</label>
                                                <input type="text" id="guardian-relation" name="guardian_relation" 
                                                    class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                            </div>
                                        </div>
                                        
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="space-y-1">
                                                <label for="guardian-phone" class="block text-sm font-medium text-gray-700">Phone</label>
                                                <div class="relative rounded-md shadow-sm">
                                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                        <span class="text-gray-500 sm:text-sm">+977</span>
                                                    </div>
                                                    <input type="tel" id="guardian-phone" name="guardian_phone" 
                                                        class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 pl-12 border transition-all duration-200 hover:border-blue-300">
                                                </div>
                                            </div>
                                            <div class="space-y-1">
                                                <label for="guardian-email" class="block text-sm font-medium text-gray-700">Email</label>
                                                <input type="email" id="guardian-email" name="guardian_email" 
                                                    class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Address Information Section -->
                            <div>
                                <h4 class="text-md font-medium text-gray-700 mb-3">Address Information</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="space-y-1">
                                        <label for="street" class="block text-sm font-medium text-gray-700">Street *</label>
                                        <input type="text" id="street" name="street" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="city" class="block text-sm font-medium text-gray-700">City *</label>
                                        <input type="text" id="city" name="city" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                    <div class="space-y-1">
                                        <label for="state" class="block text-sm font-medium text-gray-700">State *</label>
                                        <input type="text" id="state" name="state" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                    <div class="space-y-1">
                                        <label for="postal-code" class="block text-sm font-medium text-gray-700">Postal Code *</label>
                                        <input type="text" id="postal-code" name="postal_code" 
                                            class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300"
                                            required>
                                    </div>
                                </div>
                                
                                <div class="space-y-1 mt-4">
                                    <label for="country" class="block text-sm font-medium text-gray-700">Country</label>
                                    <input type="text" id="country" name="country" value="Nepal"
                                        class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-all duration-200 hover:border-blue-300">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                
                <!-- Footer with action buttons -->
                <div class="bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3">
                    <button type="button" id="cancelAddStudent" 
                            class="mt-3 sm:mt-0 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 hover:shadow">
                        Cancel
                    </button>
                    <button type="button" id="saveStudent" 
                            class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-sm font-medium text-white hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 hover:shadow-lg">
                        Save Student
                    </button>
                </div>
            </div>
        </div>
    </div>




        

    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Modal toggle
        const addButtons = [document.getElementById('addStudent'), document.getElementById('addStudentCard')];
        const modal = document.getElementById('addStudentModal');
        const cancelButton = document.getElementById('cancelAddStudent');
        
        addButtons.forEach(btn => {
            btn.addEventListener('click', () => modal.classList.remove('hidden'));
        });
        cancelButton.addEventListener('click', () => modal.classList.add('hidden'));
        
        // Form submission
        document.getElementById('saveStudent').addEventListener('click', function() {
            const form = document.getElementById('studentForm');
            const formData = new FormData(form);
            const saveBtn = this;
            
            // Show loading state
            saveBtn.disabled = true;
            saveBtn.innerHTML = `
                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Saving...
            `;
            
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Show success notification
                    showNotification('Student added successfully!', 'success');
                    modal.classList.add('hidden');
                    form.reset();
                    // Refresh the page to show new student
                    setTimeout(() => window.location.reload(), 1000);
                } else {
                    showNotification(data.message || 'Error adding student', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('An error occurred while saving', 'error');
            })
            .finally(() => {
                saveBtn.disabled = false;
                saveBtn.textContent = 'Save Student';
            });
        });

        // Notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-4 py-2 rounded-md shadow-md text-white ${
                type === 'success' ? 'bg-green-500' : 'bg-red-500'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    });

    document.getElementById('has-guardian').addEventListener('change', function() {
        document.getElementById('guardian-fields').classList.toggle('hidden', !this.checked);
    });
</script>

<style>
    .btn-primary {
        @apply inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200;
    }
    .btn-secondary {
        @apply inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200;
    }
    .input-field {
        @apply block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm py-2 px-3 border transition-colors duration-200;
    }
    .btn-icon {
        @apply inline-flex items-center px-2 py-2 border border-transparent text-sm font-medium rounded-md hover:bg-gray-100 transition-colors duration-200;
    }
</style>
{% endblock %}